<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_udq_swp_xrb">
    <title>Log4Shell - Oxygen XML Vulnerability Analysis FAQ</title>
    <shortdesc>NIST has announced a recent vulnerability (<xref
            href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228" format="html" scope="external"
            >CVE-2021-44228</xref>) in the <xref
            href="https://logging.apache.org/log4j/2.x/index.html" format="html" scope="external"
            >Apache Log4j</xref> library.</shortdesc>
    <body>
        <ol id="list_oxygen_xml_vulnerability_analysis_faq">
            <li>How to protect against this vulnerability?<ul id="ul_olb_vwp_xrb">
                    <li>First, set the <codeph>-Dlog4j2.formatMsgNoLookups=true</codeph> system
                        property or <codeph>LOG4J_FORMAT_MSG_NO_LOOKUPS="true"</codeph> environment
                        variable.</li>
                    <li>Upgrade to the latest version of our products as soon as maintenance builds
                        are available that contain the fix.</li>
                </ul></li>
            <li>How do I set this system property or environment variable?<ul id="ul_plb_vwp_xrb">
                    <li><xref
                            href="https://www.oxygenxml.com/doc/versions/24.0.0/ug-webauthor/topics/webauthor-set-system-property.html"
                            format="html" scope="external">Oxygen Web Author</xref><p><b>Note:</b>
                            The system property is not inherited when using the Web Author PDF
                            Publishing (not included by default), so setting the environment
                            variable is recommended.</p></li>
                    <li><xref
                            href="https://www.oxygenxml.com/doc/versions/24.0/ug-editor/topics/set-parameter-in-startup-script.html#set-parameters-for-application-launchers__setting-a-system-property"
                            format="html" scope="external">Oxygen XML Editor / Author /
                            Developer</xref></li>
                    <li>Oxygen PDF Chemistry: Open the chemistry.bat file from the installation
                        directory and add the <codeph>-Dlog4j2.formatMsgNoLookups=true</codeph> just
                        before the <codeph>-cp</codeph> command line option (you can search for this
                        flag).</li>
                    <li>Oxygen Content Fusion: set the <codeph>LOG4J_FORMAT_MSG_NO_LOOKUPS</codeph>
                        environment variable for each service and restart the server: <xref
                            href="https://www.oxygenxml.com/doc/versions/4.1/ug-content-fusion/topics/cf-restart.html"
                            format="html" scope="external"
                            >https://www.oxygenxml.com/doc/versions/4.1/ug-content-fusion/topics/cf-restart.html</xref><pre id="pre_xlb_vwp_xrb">  version: "3.5"
  services:
    license-servlet:
      mac_address: XXXXXXXXXX
      environment:
      - LOG4J_FORMAT_MSG_NO_LOOKUPS="true"
  review-api:
    environment:
    - LOG4J_FORMAT_MSG_NO_LOOKUPS="true"
  webauthor:
    environment:
    - LOG4J_FORMAT_MSG_NO_LOOKUPS="true"
  </pre></li>
                    <li><xref
                            href="https://fusion.oxygenxml.com/tasks/mrmq8fp8vjifc3vk8lu37gbikfel139nmvog6171vpqb06qd/"
                            format="html" scope="external">License server</xref></li>
                </ul></li>
            <li>Am I still vulnerable if I set the <codeph>-Dlog4j2.formatMsgNoLookups=true</codeph>
                system property?<ul id="ul_ylb_vwp_xrb">
                    <li>No. This is one of the recommended ways to protect against the
                        vulnerability.</li>
                </ul></li>
            <li>Am I still vulnerable if I set the environment variable:
                    <codeph>LOG4J_FORMAT_MSG_NO_LOOKUPS="true"</codeph> ?<ul id="ul_zlb_vwp_xrb">
                    <li>No. This may be the easier way to protect against this vulnerability. It can
                        be set server-wide to protect all applications using Log4j. It can also be
                        set for entire kubernetes clusters using <codeph>kubectl set
                        env</codeph>.</li>
                </ul></li>
            <li>Am I still vulnerable if I block all outbound traffic?<ul id="ul_amb_vwp_xrb">
                    <li>If you block ALL the outbound traffic, you may be safe, but:<ul
                            id="ul_bmb_vwp_xrb">
                            <li>be sure to block also DNS traffic as it can exfiltrate data such as
                                environment variables</li>
                            <li>be sure to re-assess which servers are trusted - maybe some trusted
                                servers had the same vulnerability and were exploited</li>
                        </ul></li>
                    <li>Either way, it is a very good idea to restrict outbound traffic from Oxygen
                        tools. This will protect you against various types of vulnerabilities.</li>
                </ul></li>
            <li>Am I still vulnerable if I use a new version of Java?<ul id="ul_cmb_vwp_xrb">
                    <li>The vulnerability is know to exist with the latest versions of Java (e.g. >
                        1.8u191) if you are also using <xref
                            href="https://github.com/veracode-research/rogue-jndihttps://github.com/veracode-research/rogue-jndi"
                            format="html" scope="external">Apache Tomcat or Webshpere</xref>. If you
                        are not using those servers, you may still be vulnerable, but we are not
                        aware of any exploit.</li>
                </ul></li>
            <li>Should I remove the JndiLookup class?<ul id="ul_nmb_vwp_xrb">
                    <li>Removing it will remove the vulnerable code. We have high confidence that
                        other problems will not be generated.</li>
                </ul></li>
            <li>Am I still vulnerable if I use an old version of Oxygen?<ul id="ul_omb_vwp_xrb">
                    <li>Before version 22.1, Oxygen products shipped with an older version of Log4j.
                        We updated log4j since then also because of some security
                            vulnerabilities.<ul id="ul_s2f_fxp_xrb">
                            <li>Oxygen XML Editor, Developer and Author with version between 16.1
                                and 22.1 contain an open-source component that distributes log4j 2
                                with a vulnerable version.</li>
                        </ul></li>
                </ul></li>
            <li>Should I set firewall rules based on HTTP headers or URLs to block attacks?<ul
                    id="ul_pmb_vwp_xrb">
                    <li>This kind of rules do not offer full protection. The URLs that exploit the
                        vulnerability can be written in various ways and are not recognized by
                        common WAF rules that you might find.</li>
                </ul></li>
            <li>How to test if I am vulnerable?<ul id="ul_qmb_vwp_xrb">
                    <li>You are.</li>
                </ul></li>
            <li>Should I do anything if the affected server is deployed inside the intranet?<ul
                    id="ul_ymb_vwp_xrb">
                    <li>Yes. The attack can be triggered from another server that was exploited or
                        by one of the employees when they follow a link in a phishing email.</li>
                </ul></li>
            <li>Should I upgrade to the latest version of your products?<ul id="ul_zmb_vwp_xrb">
                    <li>New maintenance builds that avoid this vulnerability are available for
                        versions that are in the maintenance period as noted in <xref
                            href="https://www.oxygenxml.com/security/advisory/CVE-2021-44228.html"
                            format="html" scope="external">the security advisory</xref>. Meanwhile
                        you should apply the system property or environment variable.</li>
                </ul></li>
            <li>Is this vulnerability related to Java being insecure?<ul id="ul_anb_vwp_xrb">
                    <li>No. It is caused by an open-source component called log4j which had a
                        vulnerability. This component is widely used in the Java ecosystem.</li>
                </ul></li>
            <li>How is Syncro Soft addressing the problem:<ul id="ul_bnb_vwp_xrb">
                    <li>We patched all our public servers against this vulnerability.</li>
                    <li>We created maintenance builds for versions that are in the maintenance
                        period.</li>
                    <li>We recommended temporary mitigations for product versions that are not in
                        the maintenance period.</li>
                </ul></li>
        </ol>
    </body>
    <related-links>
        <link href="https://www.lunasec.io/docs/blog/log4j-zero-day/" format="html" scope="external"/>
        <link
            href="https://msrc-blog.microsoft.com/2021/12/11/microsofts-response-to-cve-2021-44228-apache-log4j2/"
            format="html" scope="external"/>
    </related-links>
</topic>
